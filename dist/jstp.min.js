/*!
 * JavaScript Transfer Protocol ("JSTP") is licensed for use as follows:
 * 
 * """
 * MIT License
 * 
 * Copyright (c) 2016 JSTP project authors
 * (see https://github.com/metarhia/JSTP/blob/master/AUTHORS for full list)
 * and other JSTP contributors. All rights reserved.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * """
 * 
 * This license applies to parts of JSTP originating from the
 * https://github.com/metarhia/Impress repository:
 * 
 * """
 * MIT License
 * 
 * Copyright (c) 2012-2016 MetaSystems <timur.shemsedinov@gmail.com>
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * """
 * 
 * This license applies to parts of JSTP originating from the
 * https://github.com/NechaiDO/JSTP-cpp repository:
 * 
 * """
 * The MIT License (MIT)
 * 
 * Copyright (c) 2016 Dmytro Nechai, Nikolai Belochub
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * """
 * 
 */
api="object"==typeof api?api:{},api.jstp=function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}(function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))switch(typeof t[e]){case"function":break;case"object":t[e]=function(e){var r=e.slice(1),n=t[e[0]];return function(t,e,i){n.apply(this,[t,e,i].concat(r))}}(t[e]);break;default:t[e]=t[t[e]]}return t}([function(t,e,r){"use strict";var n=r(1),i={};t.exports=i,n.extend(i,r(8),r(15),r(4),r(12)),i.RemoteProxy=r(9),i.Connection=r(7),i.Server=r(26),i.tcp=r(27),i.ws=r(16),i.simpleAuthProvider=r(25)},function(t,e,r){(function(e){"use strict";function r(t){return null===t||void 0===t}var n={};t.exports=n,n.extend=function(t){if(r(t))throw new TypeError("Cannot convert undefined or null to object");"object"!=typeof t&&(t=new Object(t));var e=Array.prototype.slice.call(arguments,1).filter(function(t){return!r(t)});return e.forEach(function(e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])}),t},Object.assign&&(n.extend=Object.assign),n.forwardEvent=function(t,e,r,n){t.on(r,function(t){e.emit(n||r,t,e)})},n.forwardMultipleEvents=function(t,e,r){r.forEach(function(r){n.forwardEvent(t,e,r)})},n.createZeroFilledBuffer=function(t){var r=new e(t);return r.fill(0),r},e.alloc&&(n.createZeroFilledBuffer=e.alloc)}).call(e,r(5).Buffer)},function(t,e,r){(function(t,n){function i(t,r){var n={seen:[],stylize:s};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),y(r)?n.showHidden=r:r&&e._extend(n,r),w(n.showHidden)&&(n.showHidden=!1),w(n.depth)&&(n.depth=2),w(n.colors)&&(n.colors=!1),w(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=o),c(n,t,n.depth)}function o(t,e){var r=i.styles[e];return r?"["+i.colors[r][0]+"m"+t+"["+i.colors[r][1]+"m":t}function s(t,e){return t}function a(t){var e={};return t.forEach(function(t,r){e[t]=!0}),e}function c(t,r,n){if(t.customInspect&&r&&x(r.inspect)&&r.inspect!==e.inspect&&(!r.constructor||r.constructor.prototype!==r)){var i=r.inspect(n,t);return E(i)||(i=c(t,i,n)),i}var o=u(t,r);if(o)return o;var s=Object.keys(r),y=a(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(r)),R(r)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return h(r);if(0===s.length){if(x(r)){var v=r.name?": "+r.name:"";return t.stylize("[Function"+v+"]","special")}if(k(r))return t.stylize(RegExp.prototype.toString.call(r),"regexp");if(A(r))return t.stylize(Date.prototype.toString.call(r),"date");if(R(r))return h(r)}var g="",m=!1,_=["{","}"];if(d(r)&&(m=!0,_=["[","]"]),x(r)){var w=r.name?": "+r.name:"";g=" [Function"+w+"]"}if(k(r)&&(g=" "+RegExp.prototype.toString.call(r)),A(r)&&(g=" "+Date.prototype.toUTCString.call(r)),R(r)&&(g=" "+h(r)),0===s.length&&(!m||0==r.length))return _[0]+g+_[1];if(n<0)return k(r)?t.stylize(RegExp.prototype.toString.call(r),"regexp"):t.stylize("[Object]","special");t.seen.push(r);var b;return b=m?f(t,r,n,y,s):s.map(function(e){return l(t,r,n,y,e,m)}),t.seen.pop(),p(b,g,_)}function u(t,e){if(w(e))return t.stylize("undefined","undefined");if(E(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}return m(e)?t.stylize(""+e,"number"):y(e)?t.stylize(""+e,"boolean"):v(e)?t.stylize("null","null"):void 0}function h(t){return"["+Error.prototype.toString.call(t)+"]"}function f(t,e,r,n,i){for(var o=[],s=0,a=e.length;s<a;++s)O(e,String(s))?o.push(l(t,e,r,n,String(s),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(l(t,e,r,n,i,!0))}),o}function l(t,e,r,n,i,o){var s,a,u;if(u=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},u.get?a=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(a=t.stylize("[Setter]","special")),O(n,i)||(s="["+i+"]"),a||(t.seen.indexOf(u.value)<0?(a=v(r)?c(t,u.value,null):c(t,u.value,r-1),a.indexOf("\n")>-1&&(a=o?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n"))):a=t.stylize("[Circular]","special")),w(s)){if(o&&i.match(/^\d+$/))return a;s=JSON.stringify(""+i),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function p(t,e,r){var n=0,i=t.reduce(function(t,e){return n++,e.indexOf("\n")>=0&&n++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1]:r[0]+e+" "+t.join(", ")+" "+r[1]}function d(t){return Array.isArray(t)}function y(t){return"boolean"==typeof t}function v(t){return null===t}function g(t){return null==t}function m(t){return"number"==typeof t}function E(t){return"string"==typeof t}function _(t){return"symbol"==typeof t}function w(t){return void 0===t}function k(t){return b(t)&&"[object RegExp]"===T(t)}function b(t){return"object"==typeof t&&null!==t}function A(t){return b(t)&&"[object Date]"===T(t)}function R(t){return b(t)&&("[object Error]"===T(t)||t instanceof Error)}function x(t){return"function"==typeof t}function P(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function T(t){return Object.prototype.toString.call(t)}function S(t){return t<10?"0"+t.toString(10):t.toString(10)}function C(){var t=new Date,e=[S(t.getHours()),S(t.getMinutes()),S(t.getSeconds())].join(":");return[t.getDate(),U[t.getMonth()],e].join(" ")}function O(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var I=/%[sdj%]/g;e.format=function(t){if(!E(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(i(arguments[r]));return e.join(" ")}for(var r=1,n=arguments,o=n.length,s=String(t).replace(I,function(t){if("%%"===t)return"%";if(r>=o)return t;switch(t){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}default:return t}}),a=n[r];r<o;a=n[++r])s+=v(a)||!b(a)?" "+a:" "+i(a);return s},e.deprecate=function(r,i){function o(){if(!s){if(n.throwDeprecation)throw new Error(i);n.traceDeprecation?console.trace(i):console.error(i),s=!0}return r.apply(this,arguments)}if(w(t.process))return function(){return e.deprecate(r,i).apply(this,arguments)};if(n.noDeprecation===!0)return r;var s=!1;return o};var D,N={};e.debuglog=function(t){if(w(D)&&(D=n.env.NODE_DEBUG||""),t=t.toUpperCase(),!N[t])if(new RegExp("\\b"+t+"\\b","i").test(D)){var r=n.pid;N[t]=function(){var n=e.format.apply(e,arguments);console.error("%s %d: %s",t,r,n)}}else N[t]=function(){};return N[t]},e.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=d,e.isBoolean=y,e.isNull=v,e.isNullOrUndefined=g,e.isNumber=m,e.isString=E,e.isSymbol=_,e.isUndefined=w,e.isRegExp=k,e.isObject=b,e.isDate=A,e.isError=R,e.isFunction=x,e.isPrimitive=P,e.isBuffer=r(23);var U=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.log=function(){console.log("%s - %s",C(),e.format.apply(e,arguments))},e.inherits=r(22),e._extend=function(t,e){if(!e||!b(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t}}).call(e,function(){return this}(),r(11))},function(t,e){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(t){return"function"==typeof t}function i(t){return"number"==typeof t}function o(t){return"object"==typeof t&&null!==t}function s(t){return void 0===t}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if(!i(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,r,i,a,c,u;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;var h=new Error('Uncaught, unspecified "error" event. ('+e+")");throw h.context=e,h}if(r=this._events[t],s(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),r.apply(this,a)}else if(o(r))for(a=Array.prototype.slice.call(arguments,1),u=r.slice(),i=u.length,c=0;c<i;c++)u[c].apply(this,a);return!0},r.prototype.addListener=function(t,e){var i;if(!n(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,n(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(i=s(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[t].length>i&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){function r(){this.removeListener(t,r),i||(i=!0,e.apply(this,arguments))}if(!n(e))throw TypeError("listener must be a function");var i=!1;return r.listener=e,this.on(t,r),this},r.prototype.removeListener=function(t,e){var r,i,s,a;if(!n(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(r=this._events[t],s=r.length,i=-1,r===e||n(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(r)){for(a=s;a-- >0;)if(r[a]===e||r[a].listener&&r[a].listener===e){i=a;break}if(i<0)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(i,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[t],n(r))this.removeListener(t,r);else if(r)for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?n(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(n(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,r){"use strict";function n(t,e){Error.captureStackTrace?Error.captureStackTrace(this,n):this.stack=new Error(e).stack,this.message=e||n.defaultMessages[t]||t.toString(),this.code=t}var i=r(2),o={};t.exports=o,o.ERR_APP_NOT_FOUND=10,o.ERR_AUTH_FAILED=11,o.ERR_INTERFACE_NOT_FOUND=12,o.ERR_INTERFACE_INCOMPATIBLE=13,o.ERR_METHOD_NOT_FOUND=14,o.ERR_NOT_A_SERVER=15,o.ERR_INTERNAL_API_ERROR=16,i.inherits(n,Error),o.RemoteError=n,n.prototype.name="RemoteError",n.prototype.toJstpArray=function(){var t=this.message&&this.message!==this.code.toString(),e=n.defaultMessages.hasOwnProperty(this.code);return t&&!e?[this.code,this.message]:[this.code]},n.fromJstpArray=function(t){return new n(t[0],t[1])},n.getJstpArrayFor=function(t){return t instanceof n?t.toJstpArray():Array.isArray(t)?t:"number"==typeof t?[t]:"string"==typeof t?[0,t]:[0,t.toString()]},n.defaultMessages={},n.defaultMessages[o.ERR_APP_NOT_FOUND]="Application not found",n.defaultMessages[o.ERR_AUTH_FAILED]="Authentication failed",n.defaultMessages[o.ERR_INTERFACE_NOT_FOUND]="Interface not found",n.defaultMessages[o.ERR_INTERFACE_INCOMPATIBLE]="Incompatible interface",n.defaultMessages[o.ERR_METHOD_NOT_FOUND]="Method not found",n.defaultMessages[o.ERR_NOT_A_SERVER]="Not a server",n.defaultMessages[o.ERR_INTERNAL_API_ERROR]="Internal API error"},function(t,e,r){(function(t,n){"use strict";function i(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}function o(){return t.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,r){if(o()<r)throw new RangeError("Invalid typed array length");return t.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(r),e.__proto__=t.prototype):(null===e&&(e=new t(r)),e.length=r),e}function t(e,r,n){if(!(t.TYPED_ARRAY_SUPPORT||this instanceof t))return new t(e,r,n);if("number"==typeof e){if("string"==typeof r)throw new Error("If encoding is specified then the first argument must be a string");return h(this,e)}return a(this,e,r,n)}function a(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?p(t,e,r,n):"string"==typeof e?f(t,e,r):d(t,e)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function u(t,e,r,n){return c(e),e<=0?s(t,e):void 0!==r?"string"==typeof n?s(t,e).fill(r,n):s(t,e).fill(r):s(t,e)}function h(e,r){if(c(r),e=s(e,r<0?0:0|y(r)),!t.TYPED_ARRAY_SUPPORT)for(var n=0;n<r;++n)e[n]=0;return e}function f(e,r,n){if("string"==typeof n&&""!==n||(n="utf8"),!t.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|g(r,n);e=s(e,i);var o=e.write(r,n);return o!==i&&(e=e.slice(0,o)),e}function l(t,e){var r=e.length<0?0:0|y(e.length);t=s(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function p(e,r,n,i){if(r.byteLength,n<0||r.byteLength<n)throw new RangeError("'offset' is out of bounds");if(r.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");return r=void 0===n&&void 0===i?new Uint8Array(r):void 0===i?new Uint8Array(r,n):new Uint8Array(r,n,i),t.TYPED_ARRAY_SUPPORT?(e=r,e.__proto__=t.prototype):e=l(e,r),e}function d(e,r){if(t.isBuffer(r)){var n=0|y(r.length);return e=s(e,n),0===e.length?e:(r.copy(e,0,0,n),e)}if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||K(r.length)?s(e,0):l(e,r);if("Buffer"===r.type&&X(r.data))return l(e,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function y(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function v(e){return+e!=e&&(e=0),t.alloc(+e)}function g(e,r){if(t.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var i=!1;;)switch(r){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return W(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Z(e).length;default:if(i)return W(e).length;r=(""+r).toLowerCase(),i=!0}}function m(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,e>>>=0,r<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return D(this,e,r);case"utf8":case"utf-8":return S(this,e,r);case"ascii":return O(this,e,r);case"latin1":case"binary":return I(this,e,r);case"base64":return T(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function E(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function _(e,r,n,i,o){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof r&&(r=t.from(r,i)),t.isBuffer(r))return 0===r.length?-1:w(e,r,n,i,o);if("number"==typeof r)return r&=255,t.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,r,n):Uint8Array.prototype.lastIndexOf.call(e,r,n):w(e,[r],n,i,o);throw new TypeError("val must be string, number or Buffer")}function w(t,e,r,n,i){function o(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}var s=1,a=t.length,c=e.length;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,a/=2,c/=2,r/=2}var u;if(i){var h=-1;for(u=r;u<a;u++)if(o(t,u)===o(e,h===-1?0:u-h)){if(h===-1&&(h=u),u-h+1===c)return h*s}else h!==-1&&(u-=u-h),h=-1}else for(r+c>a&&(r=a-c),u=r;u>=0;u--){for(var f=!0,l=0;l<c;l++)if(o(t,u+l)!==o(e,l)){f=!1;break}if(f)return u}return-1}function k(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var o=e.length;if(o%2!==0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[r+s]=a}return s}function b(t,e,r,n){return $(W(e,t.length-r),t,r,n)}function A(t,e,r,n){return $(q(e),t,r,n)}function R(t,e,r,n){return A(t,e,r,n)}function x(t,e,r,n){return $(Z(e),t,r,n)}function P(t,e,r,n){return $(V(e,t.length-r),t,r,n)}function T(t,e,r){return 0===e&&r===t.length?Q.fromByteArray(t):Q.fromByteArray(t.slice(e,r))}function S(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o=t[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a<=r){var c,u,h,f;switch(a){case 1:o<128&&(s=o);break;case 2:c=t[i+1],128===(192&c)&&(f=(31&o)<<6|63&c,f>127&&(s=f));break;case 3:c=t[i+1],u=t[i+2],128===(192&c)&&128===(192&u)&&(f=(15&o)<<12|(63&c)<<6|63&u,f>2047&&(f<55296||f>57343)&&(s=f));break;case 4:c=t[i+1],u=t[i+2],h=t[i+3],128===(192&c)&&128===(192&u)&&128===(192&h)&&(f=(15&o)<<18|(63&c)<<12|(63&u)<<6|63&h,f>65535&&f<1114112&&(s=f))}}null===s?(s=65533,a=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),i+=a}return C(n)}function C(t){var e=t.length;if(e<=tt)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=tt));return r}function O(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function I(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function D(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=J(t[o]);return i}function N(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function U(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function B(e,r,n,i,o,s){if(!t.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>o||r<s)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function L(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);i<o;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function M(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);i<o;++i)t[r+i]=e>>>8*(n?i:3-i)&255}function j(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function F(t,e,r,n,i){return i||j(t,e,r,4,3.4028234663852886e38,-3.4028234663852886e38),G.write(t,e,r,n,23,4),r+4}function Y(t,e,r,n,i){return i||j(t,e,r,8,1.7976931348623157e308,-1.7976931348623157e308),G.write(t,e,r,n,52,8),r+8}function H(t){if(t=z(t).replace(et,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function z(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function J(t){return t<16?"0"+t.toString(16):t.toString(16)}function W(t,e){e=e||1/0;for(var r,n=t.length,i=null,o=[],s=0;s<n;++s){if(r=t.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function q(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}function V(t,e){for(var r,n,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)r=t.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}function Z(t){return Q.toByteArray(H(t))}function $(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function K(t){return t!==t}var Q=r(17),G=r(18),X=r(20);e.Buffer=t,e.SlowBuffer=v,e.INSPECT_MAX_BYTES=50,t.TYPED_ARRAY_SUPPORT=void 0!==n.TYPED_ARRAY_SUPPORT?n.TYPED_ARRAY_SUPPORT:i(),e.kMaxLength=o(),t.poolSize=8192,t._augment=function(e){return e.__proto__=t.prototype,e},t.from=function(t,e,r){return a(null,t,e,r)},t.TYPED_ARRAY_SUPPORT&&(t.prototype.__proto__=Uint8Array.prototype,t.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&t[Symbol.species]===t&&Object.defineProperty(t,Symbol.species,{value:null,configurable:!0})),t.alloc=function(t,e,r){return u(null,t,e,r)},t.allocUnsafe=function(t){return h(null,t)},t.allocUnsafeSlow=function(t){return h(null,t)},t.isBuffer=function(t){return!(null==t||!t._isBuffer)},t.compare=function(e,r){if(!t.isBuffer(e)||!t.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(e===r)return 0;for(var n=e.length,i=r.length,o=0,s=Math.min(n,i);o<s;++o)if(e[o]!==r[o]){n=e[o],i=r[o];break}return n<i?-1:i<n?1:0},t.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(e,r){if(!X(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return t.alloc(0);var n;if(void 0===r)for(r=0,n=0;n<e.length;++n)r+=e[n].length;var i=t.allocUnsafe(r),o=0;for(n=0;n<e.length;++n){var s=e[n];if(!t.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(i,o),o+=s.length}return i},t.byteLength=g,t.prototype._isBuffer=!0,t.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)E(this,e,e+1);return this},t.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)E(this,e,e+3),E(this,e+1,e+2);return this},t.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)E(this,e,e+7),E(this,e+1,e+6),E(this,e+2,e+5),E(this,e+3,e+4);return this},t.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?S(this,0,t):m.apply(this,arguments)},t.prototype.equals=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===t.compare(this,e)},t.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},t.prototype.compare=function(e,r,n,i,o){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),r<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&r>=n)return 0;if(i>=o)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,i>>>=0,o>>>=0,this===e)return 0;for(var s=o-i,a=n-r,c=Math.min(s,a),u=this.slice(i,o),h=e.slice(r,n),f=0;f<c;++f)if(u[f]!==h[f]){s=u[f],a=h[f];break}return s<a?-1:a<s?1:0},t.prototype.includes=function(t,e,r){return this.indexOf(t,e,r)!==-1},t.prototype.indexOf=function(t,e,r){return _(this,t,e,r,!0)},t.prototype.lastIndexOf=function(t,e,r){return _(this,t,e,r,!1)},t.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return k(this,t,e,r);case"utf8":case"utf-8":return b(this,t,e,r);case"ascii":return A(this,t,e,r);case"latin1":case"binary":return R(this,t,e,r);case"base64":return x(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var tt=4096;t.prototype.slice=function(e,r){var n=this.length;e=~~e,r=void 0===r?n:~~r,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<e&&(r=e);var i;if(t.TYPED_ARRAY_SUPPORT)i=this.subarray(e,r),i.__proto__=t.prototype;else{var o=r-e;i=new t(o,void 0);for(var s=0;s<o;++s)i[s]=this[s+e]}return i},t.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||U(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},t.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||U(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},t.prototype.readUInt8=function(t,e){return e||U(t,1,this.length),this[t]},t.prototype.readUInt16LE=function(t,e){return e||U(t,2,this.length),this[t]|this[t+1]<<8},t.prototype.readUInt16BE=function(t,e){return e||U(t,2,this.length),this[t]<<8|this[t+1]},t.prototype.readUInt32LE=function(t,e){return e||U(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},t.prototype.readUInt32BE=function(t,e){return e||U(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},t.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||U(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},t.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||U(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},t.prototype.readInt8=function(t,e){return e||U(t,1,this.length),128&this[t]?(255-this[t]+1)*-1:this[t]},t.prototype.readInt16LE=function(t,e){e||U(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},t.prototype.readInt16BE=function(t,e){e||U(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},t.prototype.readInt32LE=function(t,e){return e||U(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},t.prototype.readInt32BE=function(t,e){return e||U(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},t.prototype.readFloatLE=function(t,e){return e||U(t,4,this.length),G.read(this,t,!0,23,4)},t.prototype.readFloatBE=function(t,e){return e||U(t,4,this.length),G.read(this,t,!1,23,4)},t.prototype.readDoubleLE=function(t,e){return e||U(t,8,this.length),G.read(this,t,!0,52,8)},t.prototype.readDoubleBE=function(t,e){return e||U(t,8,this.length),G.read(this,t,!1,52,8)},t.prototype.writeUIntLE=function(t,e,r,n){if(t=+t,e|=0,r|=0,!n){var i=Math.pow(2,8*r)-1;B(this,t,e,r,i,0)}var o=1,s=0;for(this[e]=255&t;++s<r&&(o*=256);)this[e+s]=t/o&255;return e+r},t.prototype.writeUIntBE=function(t,e,r,n){if(t=+t,e|=0,r|=0,!n){var i=Math.pow(2,8*r)-1;B(this,t,e,r,i,0)}var o=r-1,s=1;for(this[e+o]=255&t;--o>=0&&(s*=256);)this[e+o]=t/s&255;return e+r},t.prototype.writeUInt8=function(e,r,n){return e=+e,r|=0,n||B(this,e,r,1,255,0),t.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[r]=255&e,r+1},t.prototype.writeUInt16LE=function(e,r,n){return e=+e,r|=0,n||B(this,e,r,2,65535,0),t.TYPED_ARRAY_SUPPORT?(this[r]=255&e,this[r+1]=e>>>8):L(this,e,r,!0),r+2},t.prototype.writeUInt16BE=function(e,r,n){return e=+e,r|=0,n||B(this,e,r,2,65535,0),t.TYPED_ARRAY_SUPPORT?(this[r]=e>>>8,this[r+1]=255&e):L(this,e,r,!1),r+2},t.prototype.writeUInt32LE=function(e,r,n){return e=+e,r|=0,n||B(this,e,r,4,4294967295,0),t.TYPED_ARRAY_SUPPORT?(this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=255&e):M(this,e,r,!0),r+4},t.prototype.writeUInt32BE=function(e,r,n){return e=+e,r|=0,n||B(this,e,r,4,4294967295,0),t.TYPED_ARRAY_SUPPORT?(this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=255&e):M(this,e,r,!1),r+4},t.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);B(this,t,e,r,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<r&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+r},t.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);B(this,t,e,r,i-1,-i)}var o=r-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+r},t.prototype.writeInt8=function(e,r,n){return e=+e,r|=0,n||B(this,e,r,1,127,-128),t.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[r]=255&e,r+1},t.prototype.writeInt16LE=function(e,r,n){return e=+e,r|=0,n||B(this,e,r,2,32767,-32768),t.TYPED_ARRAY_SUPPORT?(this[r]=255&e,this[r+1]=e>>>8):L(this,e,r,!0),r+2},t.prototype.writeInt16BE=function(e,r,n){return e=+e,r|=0,n||B(this,e,r,2,32767,-32768),t.TYPED_ARRAY_SUPPORT?(this[r]=e>>>8,this[r+1]=255&e):L(this,e,r,!1),r+2},t.prototype.writeInt32LE=function(e,r,n){return e=+e,r|=0,n||B(this,e,r,4,2147483647,-2147483648),t.TYPED_ARRAY_SUPPORT?(this[r]=255&e,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24):M(this,e,r,!0),r+4},t.prototype.writeInt32BE=function(e,r,n){return e=+e,r|=0,n||B(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),t.TYPED_ARRAY_SUPPORT?(this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=255&e):M(this,e,r,!1),r+4},t.prototype.writeFloatLE=function(t,e,r){return F(this,t,e,!0,r)},t.prototype.writeFloatBE=function(t,e,r){return F(this,t,e,!1,r)},t.prototype.writeDoubleLE=function(t,e,r){return Y(this,t,e,!0,r)},t.prototype.writeDoubleBE=function(t,e,r){return Y(this,t,e,!1,r)},t.prototype.copy=function(e,r,n,i){if(n||(n=0),i||0===i||(i=this.length),r>=e.length&&(r=e.length),r||(r=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-r<i-n&&(i=e.length-r+n);var o,s=i-n;if(this===e&&n<r&&r<i)for(o=s-1;o>=0;--o)e[o+r]=this[o+n];else if(s<1e3||!t.TYPED_ARRAY_SUPPORT)for(o=0;o<s;++o)e[o+r]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+s),r);return s},t.prototype.fill=function(e,r,n,i){if("string"==typeof e){if("string"==typeof r?(i=r,r=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!t.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof e&&(e&=255);
if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var s;if("number"==typeof e)for(s=r;s<n;++s)this[s]=e;else{var a=t.isBuffer(e)?e:W(new t(e,i).toString()),c=a.length;for(s=0;s<n-r;++s)this[s+r]=a[s%c]}return this};var et=/[^+\/0-9A-Za-z-_]/g}).call(e,r(5).Buffer,function(){return this}())},function(t,e,r){(function(t,n){function i(t,e){this._id=t,this._clearFn=e}var o=r(11).nextTick,s=Function.prototype.apply,a=Array.prototype.slice,c={},u=0;e.setTimeout=function(){return new i(s.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new i(s.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},e.setImmediate="function"==typeof t?t:function(t){var r=u++,n=!(arguments.length<2)&&a.call(arguments,1);return c[r]=!0,o(function(){c[r]&&(n?t.apply(null,n):t.call(null),e.clearImmediate(r))}),r},e.clearImmediate="function"==typeof n?n:function(t){delete c[t]}}).call(e,r(6).setImmediate,r(6).clearImmediate)},function(t,e,r){"use strict";function n(t,e,r){if(i.EventEmitter.call(this),this.transport=t,this.server=e,this.client=r,this.id=f++,this._nextPacketId=0,e&&!r)this._packetIdDelta=-1;else{if(!r||e)throw new Error("Either server or client is required");this._packetIdDelta=1}this.remoteAddress=t.getRemoteAddress(),this._callbacks={},this.handshakeDone=!1,this.authenticated=!1,this.sessionId=null,this.application=null,this.remoteProxies={},t.on("data",this._onSocketData.bind(this)),t.on("close",this._onSocketClose.bind(this)),t.on("error",this._onSocketError.bind(this))}var i=r(3),o=r(6),s=r(2),a=r(8),c=r(1),u=r(4),h=r(9);t.exports=n;var f=0;s.inherits(n,i.EventEmitter),n.prototype.callMethod=function(t,e,r,n){var i=this.createPacket("call",t,e,r);if(n){var o=i.call[0];this._callbacks[o]=n}this._send(i)},n.prototype.callback=function(t,e,r){var n;e?(e=u.RemoteError.getJstpArrayFor(e),n=this.createPacket("callback",null,"error",e)):n=this.createPacket("callback",null,"ok",r),n.callback[0]=t,this._send(n)},n.prototype.emitRemoteEvent=function(t,e,r){var n=this.createPacket("event",t,e,r);this._send(n)},n.prototype.notifyStateChange=function(t,e,r){var n=this.createPacket("state",t,e,r);this._send(n)},n.prototype.handshake=function(t,e,r,n){var i=this.createPacket("handshake",t,e,r);if(n){var o=i.handshake[0],s=this;this._callbacks[o]=function(t,i){e&&r&&!t&&(s.authenticated=!0),n(t,i)}}this._send(i)},n.prototype.inspectInterface=function(t,e){var r=this.createPacket("inspect",t,null,null),n=r.inspect[0],i=this;this._callbacks[n]=function(r){if(r)return e(r);var n=Array.prototype.slice.call(arguments,1),o=new h(this,t,n);i.remoteProxies[t]=o,e&&e(null,o)},this._send(r)},n.prototype.createPacket=function(t,e,r,n){var i={};return i[t]=e?[this._nextPacketId,e]:[this._nextPacketId],r&&(i[r]=n),this._nextPacketId+=this._packetIdDelta,i},n.prototype.close=function(){this.transport.end()},n.prototype.setTimeout=function(t,e){o.enroll(this,t),o._unrefActive(this),this.once("_timeout",e)},n.prototype._onTimeout=function(){this.emit("_timeout")},n.prototype._send=function(t){var e=a.stringify(t);this.transport.send(e)},n.prototype._end=function(t){if(t){var e=a.stringify(t);this.transport.end(e)}else this.transport.end()},n.prototype._onSocketData=function(t){this.emit("data",t);var e=a.parse(t);this._processPackets(e)},n.prototype._onSocketClose=function(){this.emit("close",this),this.server&&this.server.emit("disconnect",this)},n.prototype._onSocketError=function(t){this.emit("error",t,this)},n.prototype._processPackets=function(t){for(var e=0;e<t.length;e++){var r=t[e];this.emit("packet",r,this);var i=Object.keys(r),o=i[0];if(!this.handshakeDone&&"handshake"!==o)return void this._rejectPacket(r,!0);var s=n.PACKET_HANDLER_NAMES[o];s?this[s](r,i):this._rejectPacket(r)}},n.prototype._rejectPacket=function(t,e){this.emit("packetRejected",t,this),e&&this._end()},n.prototype._processHandshakePacket=function(t,e){return this.handshakeDone?void this.emit("abundantHandshake",t,this):void(t.handshake[1]?this._processHandshakeRequest(t,e):this._processHandshakeResponse(t,e))},n.prototype._processHandshakeRequest=function(t,e){if(!this.server)return void this._handshakeError(u.ERR_NOT_A_SERVER);var r=t.handshake[1],n=this.server.getApplication(r);if(!n)return void this._handshakeError(u.ERR_APP_NOT_FOUND);this.application=n;var i=e[1],o=t[i];this._emitPacketEvent("handshakeRequest",t,t.handshake[0],{packetType:"handshake",handshakeRequest:!0,username:i,password:o}),i?this.server.startAuthenticatedSession(this,n,i,o,this._onAuthenticatedSessionCreated.bind(this)):this.server.startAnonymousSession(this,n,this._onSessionCreated.bind(this))},n.prototype._onSessionCreated=function(t,e){if(t)return void this._handshakeError(u.ERR_AUTH_FAILED);this.handshakeDone=!0,this.emit("client",e,this),this.server.emit("connect",this);var r=this.createPacket("handshake",null,"ok",e);this._send(r)},n.prototype._onAuthenticatedSessionCreated=function(t,e){t||(this.authenticated=!0),this._onSessionCreated(t,e)},n.prototype._processHandshakeResponse=function(t){var e=t.handshake[0],r=this._callbacks[e];r||this._rejectPacket(t),t.ok?(delete this._callbacks[e],this.handshakeDone=!0,this.application=this.client.getApplication(),this._emitPacketEvent("handshake",t,e,{sessionId:t.ok}),r(null,t.ok)):t.error?(delete this._callbacks[e],r(u.RemoteError.fromJstpArray(t.error))):this._rejectPacket(t,!0)},n.prototype._handshakeError=function(t){var e=u.RemoteError.getJstpArrayFor(t),r=this.createPacket("handshake",null,"error",e);this._end(r)},n.prototype._processCallPacket=function(t,e){var r=t.call[0],n=t.call[1],i=e[1],o=t[i];this._emitPacketEvent("call",t,r,{interfaceName:n,methodName:i});var s=this._remoteCallbackWrapper.bind(this,r);o.push(s);try{this.application.callMethod(this,n,i,o)}catch(t){if(!(t instanceof u.RemoteError))throw s(u.ERR_INTERNAL_API_ERROR),t;s(t)}},n.prototype._processCallbackPacket=function(t){var e=t.callback[0],r=this._callbacks[e];r&&(delete this._callbacks[e],t.ok?r.apply(this,[null].concat(t.ok)):t.error?r(u.RemoteError.fromJstpArray(t.error)):this._rejectPacket(t));var n=r?null:{sourcePacketUnknown:!0};this._emitPacketEvent("callback",t,e,n),r||this.emit("callbackForUnknownPacket",e,t,this)},n.prototype._processEventPacket=function(t,e){var r=t.event[1],n=e[1],i=t[n];this._emitPacketEvent("event",t,t.event[0],{interfaceName:r,remoteEventName:n,remoteEventArgs:i});var o=this.remoteProxies[r];o&&o.emit(n,i,!0)},n.prototype._processInspectPacket=function(t){var e=t.inspect[0],r=t.inspect[1];this._emitPacketEvent("inspect",t,e,{interfaceName:r});var n=this.application.getMethods(r);n?this.callback(e,null,n):this.callback(e,u.ERR_INTERFACE_NOT_FOUND)},n.prototype._processStatePacket=function(t,e){var r=t.state[1],n=e[1],i=t[n];this._emitPacketEvent("state",t,t.state[0],{path:r,verb:n,value:i})},n.prototype._remoteCallbackWrapper=function(t,e){var r=Array.prototype.slice.call(arguments,2);this.callback(t,e,r)},n.prototype._emitPacketEvent=function(t,e,r,n){var i={connection:this,packetType:t,packet:e,packetId:r,application:this.application};n&&c.extend(i,n),this.emit(t,i)},n.PACKET_HANDLER_NAMES={handshake:"_processHandshakePacket",call:"_processCallPacket",callback:"_processCallbackPacket",event:"_processEventPacket",inspect:"_processInspectPacket",state:"_processStatePacket"}},function(t,e,r){"use strict";function n(t){this.string=t,this.lookaheadIndex=0}var i=r(10),o={};t.exports=o,o.stringify=i.createSerializer(),o.parse=function(t){var e=new n(t);return e.parse()},n.prototype.parse=function(){var t=this.parseValue();return this.skipClutter(),this.lookaheadIndex<this.string.length&&this.throwUnexpected(),t},n.prototype.lookahead=function(){return this.string[this.lookaheadIndex]},n.prototype.advance=function(){var t=this.string[this.lookaheadIndex++];if(this.lookaheadIndex>this.string.length)throw new SyntaxError("Unexpected end of data");return t},n.prototype.retreat=function(){if(this.lookaheadIndex--,this.lookaheadIndex<0)throw new SyntaxError("Parse error")},n.prototype.match=function(t){this.advance()!==t&&this.throwExpected(t)},n.prototype.throwError=function(t){throw new SyntaxError(t+" at position "+this.lookaheadIndex)},n.prototype.throwExpected=function(t){this.throwError(t+" expected")},n.prototype.throwUnexpected=function(t){t=t||this.lookahead(),void 0===t&&(t="end of data"),this.throwError("Unexpected "+t)},n.prototype.isWhitespace=function(t){return" \f\n\r\t\v".indexOf(t)!==-1},n.prototype.isNewline=function(t){return"\n"===t||"\r"===t},n.prototype.isLetter=function(t){return t>="a"&&t<="z"},n.prototype.isInitialDigit=function(t){return this.isDecimalDigit(t)||"+"===t||"-"===t||"."===t},n.prototype.isDigit=function(t){return this.isInitialDigit(t)||"e"===t||"E"===t},n.prototype.isBinaryDigit=function(t){return"0"===t||"1"===t},n.prototype.isOctalDigit=function(t){return t>="0"&&t<="7"},n.prototype.isDecimalDigit=function(t){return t>="0"&&t<="9"},n.prototype.isHexadecimalDigit=function(t){return t>="0"&&t<="9"||t>="a"&&t<="f"||t>="A"&&t<="F"},n.prototype.isQuoteCharacter=function(t){return"'"===t||'"'===t},n.prototype.isInititalIdentifierCharacter=function(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"||"_"===t||"$"===t},n.prototype.isIdentifierCharacter=function(t){return this.isInititalIdentifierCharacter(t)||this.isDecimalDigit(t)},n.prototype.skipClutter=function(){this.skipWhitespace(),this.skipComments(),this.skipWhitespace()},n.prototype.skipWhitespace=function(){for(;this.isWhitespace(this.lookahead());)this.advance()},n.prototype.skipComments=function(){"/"===this.lookahead()&&(this.advance(),"/"===this.lookahead()?(this.advance(),this.skipLineCommentBody()):"*"===this.lookahead()?(this.advance(),this.skipMultilineCommentBody()):this.retreat())},n.prototype.skipLineCommentBody=function(){for(;!this.isNewline(this.lookahead())&&void 0!==this.lookahead();)this.advance()},n.prototype.skipMultilineCommentBody=function(){for(var t=!1;!t;){for(;"*"!==this.lookahead();)this.advance();this.advance(),"/"===this.lookahead()&&(this.advance(),t=!0)}},n.prototype.parseValue=function(){this.skipClutter();var t=this.lookahead();return this.isInitialDigit(t)?this.parseNumber():this.isLetter(t)?this.parseIdentifier():this.isQuoteCharacter(t)?this.parseString():"["===t?this.parseArray():"{"===t?this.parseObject():void this.throwUnexpected()},n.prototype.parseNumber=function(){this.skipClutter();var t=!1,e=this.lookahead();"+"!==e&&"-"!==e||(t="-"===e,this.advance());var r=10;"0"===this.lookahead()&&(this.advance(),e=this.lookahead(),this.isDecimalDigit(e)?this.throwError("Use new octal literals syntax"):"b"===e?(r=2,this.advance()):"o"===e?(r=8,this.advance()):"x"===e?(r=16,this.advance()):this.retreat());var n=10===r?this.parseDecimal():this.parseMachineInteger(r);return isNaN(n)&&this.throwError("Invalid number format"),t?-n:n},n.prototype.parseDecimal=function(){for(var t="",e={dot:!1,sign:!1,exponent:!1};this.isDigit(this.lookahead());)this.checkNumberPartEncountered(e,"dot","."),this.checkNumberPartEncountered(e,"sign","+","-"),this.checkNumberPartEncountered(e,"exponent","e","E"),t+=this.advance();return parseFloat(t)},n.prototype.checkNumberPartEncountered=function(t,e,r,n){var i=this.lookahead();(i===r||n&&i===n)&&(t[e]&&this.throwUnexpected(),t[e]=!0)},n.prototype.parseMachineInteger=function(t){for(var e=this,r={2:e.isBinaryDigit,8:e.isOctalDigit,16:e.isHexadecimalDigit},n=r[t],i="";n(this.lookahead());)i+=this.advance();return parseInt(i,t)},n.prototype.parseIdentifier=function(){this.skipClutter();for(var t="";this.isLetter(this.lookahead());)t+=this.advance();var e={undefined:void 0,null:null,true:!0,false:!1};return e.hasOwnProperty(t)?e[t]:void this.throwUnexpected()},n.prototype.parseString=function(){this.skipClutter();var t=this.lookahead();this.isQuoteCharacter(t)||this.throwExpected("String");var e="",r=!1;for(this.advance();r||this.lookahead()!==t;){var n=this.advance();if(r){var i={b:"\b",f:"\f",n:"\n",r:"\r",t:"\t",v:"\v"},o=i[n];o?e+=o:this.isOctalDigit(n)?(this.retreat(),e+=this.parseOctalEncodedStringCharacter()):"x"===n?(this.retreat(),e+=this.parseOneByteHexEncodedCharacter()):"u"===n?(this.retreat(),e+=this.parseUnicodeCharacter()):e+=n,r=!1}else"\\"===n?r=!0:e+=n}return this.match(t),e},n.prototype.parseOctalEncodedStringCharacter=function(){for(var t="",e=0;e<3;e++){var r=this.advance();if(!this.isOctalDigit(r)){this.retreat();break}t+=r}0===t.length&&this.throwExpected("Octal number");var n=parseInt(t,8);return String.fromCharCode(n)},n.prototype.parseHexEncodedStringCharacter=function(t){for(var e="",r=0;r<t;r++){var n=this.advance();this.isHexadecimalDigit(n)||this.throwExpected("Hexadecimal digit"),e+=n}var i=parseInt(e,16);return String.fromCharCode(i)},n.prototype.parseOneByteHexEncodedCharacter=function(){return this.match("x"),this.parseHexEncodedStringCharacter(2)},n.prototype.parseTwoByteHexEncodedCharacter=function(){return this.match("u"),this.parseHexEncodedStringCharacter(4)},n.prototype.parseUnicodeCharacter=function(){return this.match("u"),"{"===this.lookahead()?this.parseEs6UnicodeLiteral():(this.retreat(),this.parseTwoByteHexEncodedCharacter())},n.prototype.parseEs6UnicodeLiteral=function(){this.match("{");for(var t="";"}"!==this.lookahead();){var e=this.advance();this.isHexadecimalDigit(e)||this.throwExpected("Hexadecimal digit"),t+=e}(0===t.length||t.length>8)&&this.throwError("Invalid code point"),this.match("}");var r=parseInt(t,16);return String.fromCodePoint(r)},n.prototype.parseArray=function(){this.skipClutter(),this.match("[");for(var t=[];"]"!==this.lookahead();){if(this.skipClutter(),","===this.lookahead())t.push(void 0);else{if("]"===this.lookahead())break;var e=this.parseValue();t.push(e)}this.skipClutter(),"]"!==this.lookahead()&&this.match(",")}return this.match("]"),t},n.prototype.parseObject=function(){this.skipClutter();var t={};for(this.match("{");"}"!==this.lookahead();){var e=this.parseObjectKey();this.match(":");var r=this.parseValue();void 0!==r&&(t[e]=r),this.skipClutter(),"}"!==this.lookahead()&&(this.match(","),this.skipClutter())}return this.skipClutter(),this.match("}"),t},n.prototype.parseObjectKey=function(){if(this.skipClutter(),this.isQuoteCharacter(this.lookahead()))return this.parseString();this.isInititalIdentifierCharacter(this.lookahead())||this.throwExpected("String or identifier");for(var t="";this.isIdentifierCharacter(this.lookahead());)t+=this.advance();return t}},function(t,e,r){"use strict";function n(t,e,r){if(o.EventEmitter.call(this),this._connection=t,this._interfaceName=e,r)for(var i=0;i<r.length;i++)n.wrapRemoteMethod(this,r[i])}function i(t){var e=arguments[arguments.length-1],r=Array.prototype.slice.call(arguments,1,-1);"function"!=typeof e&&(r.push(e),e=null),this._connection.callMethod(this._interfaceName,t,r,e)}var o=r(3),s=r(2);t.exports=n,s.inherits(n,o.EventEmitter),n.prototype.emit=function(t,e,r){r||this._connection.emitRemoteEvent(this._interfaceName,t,e),o.EventEmitter.prototype.emit.call(this,t,e)},n.wrapRemoteMethod=function(t,e){t[e]=i.bind(t,e)}},function(t,e,r){"use strict";var n=r(1),i={};t.exports=i,i.createSerializer=function(t){function e(t){var r;r=Array.isArray(t)?"array":t instanceof Date?"date":null===t?"null":typeof t;var n=e.types[r];return n?n(t):""}return e.types={number:function(t){return t+""},boolean:function(t){return t?"true":"false"},undefined:function(){return"undefined"},null:function(){return"null"},string:function(t){var e=JSON.stringify(t).slice(1,-1);return"'"+e.replace(/'/g,"\\'")+"'"},date:function(t){return"'"+t.toISOString()+"'"},array:function(t){for(var r="[",n=0;n<t.length;n++){var i=t[n];void 0!==i&&(r+=e(i)),n!==t.length-1&&(r+=",")}return r+"]"},object:function(t){for(var r="{",n=!0,i=Object.keys(t),o=i.length,s=0;s<o;s++){var a=i[s],c=e(t[a]);""!==c&&"undefined"!==c&&(/^[a-zA-Z_]\w*$/.test(a)||(a=e.types.string(a)),n?n=!1:r+=",",r+=a+":"+c)}return r+"}"}},n.extend(e.types,t),e}},function(t,e){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function i(t){if(h===setTimeout)return setTimeout(t,0);if((h===r||!h)&&setTimeout)return h=setTimeout,setTimeout(t,0);try{return h(t,0)}catch(e){try{return h.call(null,t,0)}catch(e){return h.call(this,t,0)}}}function o(t){if(f===clearTimeout)return clearTimeout(t);if((f===n||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{return f(t)}catch(e){try{return f.call(null,t)}catch(e){return f.call(this,t)}}}function s(){y&&p&&(y=!1,p.length?d=p.concat(d):v=-1,d.length&&a())}function a(){if(!y){var t=i(s);y=!0;for(var e=d.length;e;){for(p=d,d=[];++v<e;)p&&p[v].run();v=-1,e=d.length}p=null,y=!1,o(t)}}function c(t,e){this.fun=t,this.array=e}function u(){}var h,f,l=t.exports={};!function(){try{h="function"==typeof setTimeout?setTimeout:r}catch(t){h=r}try{f="function"==typeof clearTimeout?clearTimeout:n}catch(t){f=n}}();var p,d=[],y=!1,v=-1;l.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];d.push(new c(t,e)),1!==d.length||y||i(a)},c.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=u,l.addListener=u,l.once=u,l.off=u,l.removeListener=u,l.removeAllListeners=u,l.emit=u,l.binding=function(t){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(t){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},function(t,e,r){"use strict";function n(t,e){this.name=t,this.api=e}function i(){this._applications={}}function o(t,e){t instanceof n?this._application=t:this._application=new n(t,e)}var s=r(4),a={};t.exports=a,a.Application=n,n.prototype.callMethod=function(t,e,r,n){var i=this.api[e];if(!i)throw new s.RemoteError(s.ERR_INTERFACE_NOT_FOUND);var o=i[r];if(!o)throw new s.RemoteError(s.ERR_METHOD_NOT_FOUND);var a={connection:t};o.apply(a,n)},n.prototype.getMethods=function(t){var e=this.api[t];return e?Object.keys(e):null},a.ServerApplicationsProvider=i,i.prototype.getApplication=function(t){return this._applications[t]},i.prototype.registerApplication=function(t,e){"string"==typeof t&&(t=new n(t,e)),this._applications[t.name]=t},a.ClientApplicationProvider=o,o.prototype.getApplication=function(){return this._application}},function(t,e,r){"use strict";function n(t,e){o.EventEmitter.call(this),this.rawClient=t,this.applicationProvider=e,c.forwardMultipleEvents(t,this,["connect","error","close"])}function i(t,e,r,n,i){if(r)return e(r);var o={},s=!1,c=new a.DataCollector(t.length,function(t){s&&(t._errors=o),e(null,n,i,t)});t.forEach(function(t){n.inspectInterface(t,function(e,r){e&&(r=null,o[t]=e,s=!0),c.collect(t,r)})})}var o=r(3),s=r(2),a=r(21),c=r(1),u=r(7);t.exports=n,s.inherits(n,o.EventEmitter),n.prototype.connect=function(t){this.rawClient.connect(function(e){if(e)return t(e);var r=this.rawClient.createTransport(),n=new u(r,null,this);t(null,n)}.bind(this))},n.prototype.disconnect=function(t){this.rawClient.disconnect(t)},n.prototype.getApplication=function(){return this.applicationProvider.getApplication()},n.prototype.connectAndHandshake=function(t,e,r,n){this.connect(function(i,o){return i?n(i):void o.handshake(t,e,r,function(t,e){return t?n(t):void n(null,o,e)})})},n.prototype.connectAndInspect=function(t,e,r,n,o){this.connectAndHandshake(t,e,r,i.bind(this,n,o))}},function(t,e){"use strict";var r={};t.exports=r,r.WEBSOCKET_PROTOCOL_NAME="metarhia-jstp"},function(t,e,r){"use strict";var n=r(24),i=r(10),o=30,s={};t.exports=s,s.interprete=function(t){var e=n.createContext({}),r=n.createScript('"use strict";('+t+")"),i=r.runInNewContext(e,{timeout:o});if("object"==typeof i&&!Array.isArray(i))for(var s in i)i.hasOwnProperty(s)&&(e[s]=i[s]);return i},s.dump=i.createSerializer({date:function(t){var e=t.toISOString();return"new Date('"+e+"')"},function:function(t){return t.toString()}})},function(t,e,r){(function(e){"use strict";function n(t){o.EventEmitter.call(this),this.url=t,this.socket=null,this.socketEventEmitter=null,this.socketDidOpen=!1}function i(t,e){o.EventEmitter.call(this),this.socket=t,this.socketEventEmitter=e,c.forwardMultipleEvents(e,this,["close","error"]),this.socketEventEmitter.on("message",this._onMessage.bind(this))}var o=r(3),s=r(2),a=r(13),c=r(1),u=r(14),h={};t.exports=h,h.createClient=function(t,e){var r=new n(t),i=new a(r,e);return i},s.inherits(n,o.EventEmitter),h.W3CWebSocketClient=n,n.prototype.connect=function(t){if(this.socketDidOpen)return void(t&&t(new Error("Already connected")));try{this.socket=new WebSocket(this.url,u.WEBSOCKET_PROTOCOL_NAME)}catch(e){return void(t&&t(e))}this.socketEventEmitter=new o.EventEmitter,this.socket.onopen=this._onOpen.bind(this),this.socket.onclose=this._onClose.bind(this),this.socket.onerror=this._onError.bind(this),this.socket.onmessage=this._onMessage.bind(this),this.socketEventEmitter.once("connectFailed",function(e){t&&t(e)}),this.socketEventEmitter.once("open",function(){t&&t()})},n.prototype.disconnect=function(t){this._ensureConnected(),t&&this.connection.once("close",t),this.socket.close()},n.prototype.createTransport=function(){return this._ensureConnected(),new i(this.socket,this.socketEventEmitter)},n.prototype._ensureConnected=function(){if(!this.socketDidOpen)throw new Error("Not connected yet")},n.prototype._onOpen=function(){this.socketDidOpen=!0,this.socketEventEmitter.emit("open")},n.prototype._onClose=function(){this.socketDidOpen=!1,this.socketEventEmitter.emit("close")},n.prototype._onError=function(t){this.socketDidOpen?this.socketEventEmitter.emit("error",t):this.socketEventEmitter.emit("connectFailed",t)},n.prototype._onMessage=function(t){this.socketEventEmitter.emit("message",t)},s.inherits(i,o.EventEmitter),h.W3CWebSocketTransport=i,i.prototype.getRemoteAddress=function(){return this.socket.url},i.prototype.send=function(t){e.isBuffer(t)&&(t=t.toString()),this.socket.send(t)},i.prototype.end=function(t){t&&this.send(t),this.socket.close()},i.prototype._onMessage=function(t){var r="string"==typeof t.data?t.data:new e(t.data).toString();this.emit("data","["+r+"]")}}).call(e,r(5).Buffer)},function(t,e){"use strict";function r(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function n(t){return 3*t.length/4-r(t)}function i(t){var e,n,i,o,s,a,c=t.length;s=r(t),a=new h(3*c/4-s),i=s>0?c-4:c;var f=0;for(e=0,n=0;e<i;e+=4,n+=3)o=u[t.charCodeAt(e)]<<18|u[t.charCodeAt(e+1)]<<12|u[t.charCodeAt(e+2)]<<6|u[t.charCodeAt(e+3)],a[f++]=o>>16&255,a[f++]=o>>8&255,a[f++]=255&o;return 2===s?(o=u[t.charCodeAt(e)]<<2|u[t.charCodeAt(e+1)]>>4,a[f++]=255&o):1===s&&(o=u[t.charCodeAt(e)]<<10|u[t.charCodeAt(e+1)]<<4|u[t.charCodeAt(e+2)]>>2,a[f++]=o>>8&255,a[f++]=255&o),a}function o(t){return c[t>>18&63]+c[t>>12&63]+c[t>>6&63]+c[63&t]}function s(t,e,r){for(var n,i=[],s=e;s<r;s+=3)n=(t[s]<<16)+(t[s+1]<<8)+t[s+2],i.push(o(n));return i.join("")}function a(t){for(var e,r=t.length,n=r%3,i="",o=[],a=16383,u=0,h=r-n;u<h;u+=a)o.push(s(t,u,u+a>h?h:u+a));return 1===n?(e=t[r-1],i+=c[e>>2],i+=c[e<<4&63],i+="=="):2===n&&(e=(t[r-2]<<8)+t[r-1],i+=c[e>>10],i+=c[e>>4&63],i+=c[e<<2&63],i+="="),o.push(i),o.join("")}e.byteLength=n,e.toByteArray=i,e.fromByteArray=a;for(var c=[],u=[],h="undefined"!=typeof Uint8Array?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,p=f.length;l<p;++l)c[l]=f[l],u[f.charCodeAt(l)]=l;u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,r,n,i){var o,s,a=8*i-n-1,c=(1<<a)-1,u=c>>1,h=-7,f=r?i-1:0,l=r?-1:1,p=t[e+f];for(f+=l,o=p&(1<<-h)-1,p>>=-h,h+=a;h>0;o=256*o+t[e+f],f+=l,h-=8);for(s=o&(1<<-h)-1,o>>=-h,h+=n;h>0;s=256*s+t[e+f],f+=l,h-=8);if(0===o)o=1-u;else{if(o===c)return s?NaN:(p?-1:1)*(1/0);s+=Math.pow(2,n),o-=u}return(p?-1:1)*s*Math.pow(2,o-n)},e.write=function(t,e,r,n,i,o){var s,a,c,u=8*o-i-1,h=(1<<u)-1,f=h>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=h):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),e+=s+f>=1?l/c:l*Math.pow(2,1-f),e*c>=2&&(s++,c/=2),s+f>=h?(a=0,s=h):s+f>=1?(a=(e*c-1)*Math.pow(2,i),s+=f):(a=e*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;t[r+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;t[r+p]=255&s,p+=d,s/=256,u-=8);t[r+p-d]|=128*y}},function(t,e){var r=[].indexOf;t.exports=function(t,e){if(r)return t.indexOf(e);for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e){"use strict";var r={};t.exports=r,r.composition=function(t,e,n){1===t.length?r.parallel(t[0],e,n):r.sequential(t,e,n)},r.parallel=function(t,e,n){var i=0,o=t.length,s=!1;n=n||{},o<1?e&&e(n):t.forEach(function(t){var a=function(r){t.name&&r&&(n[t.name]=r),r instanceof Error?(s||e&&e(r),s=!0):++i>=o&&e&&e(n)};Array.isArray(t)?r.composition(t,a,n):2===t.length?t(n,a):t(a)})},r.sequential=function(t,e,n){function i(){var a,c=function(t){a.name&&t&&(n[a.name]=t),t instanceof Error?e&&e(t):i()};++o>=s?e&&e(n):(a=t[o],Array.isArray(a)?r.composition(a,c,n):2===a.length?a(n,c):a(c))}var o=-1,s=t.length;n=n||{},s>0?i():e&&e(n)},r.DataCollector=function(t,e){this.expected=t,this.data={},this.count=0,this.done=e},r.DataCollector.prototype.collect=function(t,e){this.count++,this.data[t]=e,this.expected===this.count&&this.done(this.data)},r.filter=function(t,e,r){function n(){i.sort(function(t,e){return t.index-e.index}),i=i.map(function(t){return t.value}),r&&r(i)}var i=[],o=0;t.forEach(function(r,s){e(r,function(e){e&&i.push({index:s,value:r}),++o===t.length&&n()})})},r.find=function(t,e,r){function n(){i===o?r&&r():e(t[i],function(e){e?r&&r(t[i]):(i++,n())})}var i=0,o=t.length;o>0?n():r&&r()},r.series=function(t,e,r){function n(){i++,i>=o?r&&r():e(t[i],function(t){t instanceof Error?r&&r(t):n()})}var i=-1,o=t.length;n()},r.each=function(t,e,r){var n=0,i=t.length,o=!1;i<1?r&&r():t.forEach(function(t){e(t,function(t){t instanceof Error?(o||r&&r(t),o=!0):(n++,n>=i&&r&&r())})})}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(module,exports,__webpack_require__){function Context(){}var indexOf=__webpack_require__(19),Object_keys=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var r in t)e.push(r);return e},forEach=function(t,e){if(t.forEach)return t.forEach(e);for(var r=0;r<t.length;r++)e(t[r],r,t)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(t,e,r){Object.defineProperty(t,e,{writable:!0,enumerable:!1,configurable:!0,value:r})}}catch(t){return function(t,e,r){t[e]=r}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];Context.prototype={};var Script=exports.Script=function(t){return this instanceof Script?void(this.code=t):new Script(t)};Script.prototype.runInContext=function(t){if(!(t instanceof Context))throw new TypeError("needs a 'context' argument.");var e=document.createElement("iframe");e.style||(e.style={}),e.style.display="none",document.body.appendChild(e);var r=e.contentWindow,n=r.eval,i=r.execScript;!n&&i&&(i.call(r,"null"),n=r.eval),forEach(Object_keys(t),function(e){r[e]=t[e]}),forEach(globals,function(e){t[e]&&(r[e]=t[e])});var o=Object_keys(r),s=n.call(r,this.code);return forEach(Object_keys(r),function(e){(e in t||indexOf(o,e)===-1)&&(t[e]=r[e])}),forEach(globals,function(e){e in t||defineProp(t,e,r[e])}),document.body.removeChild(e),s},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(t){var e=Script.createContext(t),r=this.runInContext(e);return forEach(Object_keys(e),function(r){t[r]=e[r]}),r},forEach(Object_keys(Script.prototype),function(t){exports[t]=Script[t]=function(e){var r=Script(e);return r[t].apply(r,[].slice.call(arguments,1))}}),exports.createScript=function(t){return exports.Script(t)},exports.createContext=Script.createContext=function(t){var e=new Context;return"object"==typeof t&&forEach(Object_keys(t),function(r){e[r]=t[r]}),e}},function(t,e){},25,25]));
//# sourceMappingURL=jstp.min.js.map