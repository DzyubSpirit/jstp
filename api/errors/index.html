<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Errors - JSTP</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Errors";
    var mkdocs_page_input_path = "api/errors.md";
    var mkdocs_page_url = "/api/errors/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> JSTP</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../..">Home</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../data-formats/">Formats</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../protocol/">Protocol</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>API</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../record-serialization/">Record Serialization</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../object-serialization/">Object Serialization</a>
        
    </li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="./">Errors</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#errors">Errors</a></li>
                
                    <li><a class="toctree-l4" href="#predefined-error-codes">Predefined Error Codes</a></li>
                
                    <li><a class="toctree-l4" href="#class-remoteerror">Class: RemoteError</a></li>
                
            
            </ul>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../auth-provider/">Authentication Providers</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../apps-provider/">Applications and Application Providers</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../remote-proxy/">Remote Proxy</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../connection/">Connection</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../server/">Server</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../client/">Client</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../transport.tcp/">TCP Transport</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../transport.ws/">WebSocket Transport (Node.js)</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../transport.ws.browser/">WebSocket Transport (Browser)</a>
        
    </li>

        
    </ul>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">JSTP</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>API &raquo;</li>
        
      
    
    <li>Errors</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/metarhia/JSTP/edit/master/doc/api/errors.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="errors">Errors</h1>
<p>Many operations in JSTP may end up with an error instead of a result.  Following
the common Node.js convention, errors are always being passed as the first
argument of callbacks of these operations and if the operation was successful,
this argument will be null.  This behavior is both consistent with the core
Node.js API and allows the JSTP API to be wrapped into promises easily and even
to be used with async/await, if you use these advanced features, while keeping
compatibility with plain callback-based asynchronous code for those who prefer
performance over convenience or those who are forced to use older versions of
Node.js.</p>
<p>Hanshakes, RPC invocations and introspection requests are special cases of such
operations.  If they end up with an error, this error will be sent over
network.  As you can see in
<a href="../../protocol/#handshake-packet-handshake">handshake</a> and
<a href="../../protocol/#remote-call-response-packet-callback">callback</a> packets
description, such errors are serialized into arrays that contain an error code
and an optional error description. A high-level abstraction for these arrays is
the <a href="#class-remoteerror"><code>RemoteError</code></a> class.</p>
<p>Callbacks of the operations stated above will receive instances of <code>RemoteError</code>
as the first argument if an error occured. However, when returning an error
from a remote method, you can pass any of the following to a callback:</p>
<ul>
<li><code>RemoteError</code> instance;</li>
<li><code>Error</code> instance;</li>
<li>numeric error code;</li>
<li>error message as a string;</li>
<li>any other object that will return an error message as a result
  of its <code>toString</code> method.</li>
</ul>
<p>If an error code is unknown (i.e., in any case except the first and third ones)
it will be equal to zero. However, it is recommended to leverage error codes
even for custom errors and return them instead of <code>Error</code> instances as it is
more efficient to send numbers than strings.</p>
<p>If a method throws an exception, the calling side will receive
<a href="#jstperr_internal_api_error">ERR_INTERNAL_API_ERROR</a>.</p>
<h2 id="predefined-error-codes">Predefined Error Codes</h2>
<h3 id="jstperr_app_not_found">jstp.ERR_APP_NOT_FOUND</h3>
<p>Value: <code>10</code>.</p>
<p>Default message: <code>Application not found</code>.</p>
<h3 id="jstperr_auth_failed">jstp.ERR_AUTH_FAILED</h3>
<p>Value: <code>11</code>.</p>
<p>Default message: <code>Authentication failed</code>.</p>
<h3 id="jstperr_interface_not_found">jstp.ERR_INTERFACE_NOT_FOUND</h3>
<p>Value: <code>12</code>.</p>
<p>Default message: <code>Interface not found</code>.</p>
<h3 id="jstperr_interface_incompatible">jstp.ERR_INTERFACE_INCOMPATIBLE</h3>
<p>Value: <code>13</code>.</p>
<p>Default message: <code>Incompatible interface</code>.</p>
<h3 id="jstperr_method_not_found">jstp.ERR_METHOD_NOT_FOUND</h3>
<p>Value: <code>14</code>.</p>
<p>Default message: <code>Method not found</code>.</p>
<h3 id="jstperr_not_a_server">jstp.ERR_NOT_A_SERVER</h3>
<p>Value: <code>15</code>.</p>
<p>Default message: <code>Not a server</code>.</p>
<h3 id="jstperr_internal_api_error">jstp.ERR_INTERNAL_API_ERROR</h3>
<p>Value: <code>16</code>.</p>
<p>Default message: <code>Internal API error</code>.</p>
<h2 id="class-remoteerror">Class: RemoteError</h2>
<p>This class is a subclass of <code>Error</code> that represents an error that has been
received from a remote method call over network.</p>
<h3 id="new-remoteerrorcode-91message93">new RemoteError(code, [message])</h3>
<ul>
<li>code {Number} error code.</li>
<li>message {String} error message.</li>
</ul>
<p>If <code>message</code> is not provided and <code>code</code> is one of predefined codes, default
message is used. If <code>message</code> is not provided and <code>code</code> is unknown, error code
will become error message too.</p>
<h3 id="errorcode">error.code</h3>
<p>Error code (number).</p>
<h3 id="errormessage">error.message</h3>
<p>Error message (String).</p>
<h3 id="errortojstparray">error.toJstpArray()</h3>
<ul>
<li>Return: {Array}</li>
</ul>
<p>Returns an array for JSTP packets. This array will always contain the error
code and, if the message is not equal to code and the code is not one of
predefined error codes, the error message.</p>
<h3 id="class-method-remoteerrorfromjstparrayarray">Class Method: RemoteError.fromJstpArray(array)</h3>
<ul>
<li><code>array</code> {Array} array from a JSTP packet.</li>
<li>Return: {<a href="#class-remoteerror">RemoteError</a>}</li>
</ul>
<p>This factory method creates a <code>RemoteError</code> instance from an array found in a
JSTP packet.</p>
<h3 id="class-method-remoteerrorgetjstparrayforerror">Class Method: RemoteError.getJstpArrayFor(error)</h3>
<ul>
<li><code>error</code> {<a href="#class-remoteerror">RemoteError</a> | Error | Number | String}
  error to be converted to an array for a JSTP packet.</li>
<li>Return: {Array}</li>
</ul>
<p>This function returns an array suitable to be sent in a JSTP packet from a
<code>RemoteError</code> instance, an <code>Error</code> instance, an error code or an error message.
If there is no error code (i.e., an <code>Error</code> or a <code>String</code> is passed), the error
code is assumed to be <code>0</code>.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../auth-provider/" class="btn btn-neutral float-right" title="Authentication Providers">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../object-serialization/" class="btn btn-neutral" title="Object Serialization"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>
    
  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/metarhia/JSTP/" class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../object-serialization/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../auth-provider/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script src="../../js/theme.js"></script>

</body>
</html>
